<h1>TARANTOOL key value store</h1>
---
Содержание
* [Описание приложения](#disc)
* [Ссылка на приложение](#ip)
* [Конфигурирование](#Configuring)
* [Тестирование](#Test)
<a id  = "disc"></a>
<h3>Описание приложения</h3>
На плтформе tarantool с помощью lua модуля http было реализовано key value хранилище,
предоставляющее следующие методы.

- POST /kv body: {key: "test", "value": {SOME ARBITRARY JSON}}
- PUT kv/{id} body: {"value": {SOME ARBITRARY JSON}}
- GET kv/{id}
- DELETE kv/{id}

Ответы:

- POST - статус 202, расположение нового ресурса в заголовке Location.
- PUT - статус 204.
- GET - статус 200, информация записанная в поле value.
- DELETE - статус 204.

Ошибки:

- POST возвращает 409 если ключ уже существует,
- POST, PUT возвращают 400 если боди некорректное
- PUT, GET, DELETE возвращает 404 если такого ключа нет - все операции логируются

Для предоставления api возможности расширения, лишние json поля игнорируются.
<a id  = "ip"></a>
<h3>Ссылка на приложение</h3>
Приложение было задиплоина на Яндекс.Облако.
Оно доступно по адресу http://178.154.250.164

<a id  = "Configuring"></a>
<h3>Конфигурирование</h3>
Приложение поддерживает небольшой список флагов для конфигурирования.

| Флаг       | Описание               |Значения по уиолчанию |
| ------------- |:------------------:|:------------------:|
| addr     | Адрес, на котором будет поднят http сервер. |0.0.0.0|
| port    | Порт, на котором будет поднят http сервер. | 80| 
| log_format  | Формат логирования, поддерживаются plain и json. | json|
|log_path | Путь к файлу, куда будут писаться логи|kv_logs.json|
|listen | Порт, по которому к консоли приложения могут подключиться другие приложения| 3000|

Чтоб запустить сервер необходимо прописать следующие команды (все параметры опциональны).
```bash
tatrantool init.lua
tarantool api.lua -port=8000 -listen=4000 ..
```

<a id  = "Test"></a>
<h3>Тестирование</h3>
***Тесты находятся в директории api_tests.***

test.py - Представляет из себя скрипт на языке python, делающий запросы на сервер, и проверящий его основные функции. Ответы сравниваются с ожиданиями с помощью ассертов.
```bash
pip3 install requests
python3 test.py
```
test.sh - bash скрипт для наглядной демонстрации ответов сервера. При запуске отправляет запросы с помощью утилиты curl и выводит в консоль ответы сервера.
```bash
sudo apt-get install curl
chmod +x test.sh
./test.sh
```